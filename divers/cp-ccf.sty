\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cp-ccf}[2023/06/15 0.1.a Commandes pour les CCF]
% 0.1.a	Version initiale

% =================================Packages ?
\RequirePackage[svgnames]{xcolor}
\RequirePackage{tcolorbox}
\tcbuselibrary{listingsutf8}
\RequirePackage{vectorlogos}
\RequirePackage{WriteOnGrid}

\definecolor{CouleurVertForet}{HTML}{1F8B36} %ForestGreen
\newcommand\papierseyes[2]{%
	\AffQuadrillage[Grille=Seyes,NbCarreaux=#1x#2,AffBarre,Marge=2]<\CoulSeyes>%
}

% =================================styles CCF
\tcbset{boxnum/.style={%
		nobeforeafter,boxsep=0pt,enhanced,width=0.8cm,top=3pt,bottom=3pt,arc=1mm,
		width=0.8cm,colback=DarkCyan,colframe=DarkCyan,colupper=white,fontupper=\bfseries
	}
}

\newcommand\deroulementccf{%
	\begin{blocccf}[orange]{Déroulement de l'épreuve}
		Cette épreuve de Contrôle en cours de Formation (\textbf{CCF}) se déroule en trois étapes :
		
		\begin{itemize}[leftmargin=*]
			\item \textbf{Étape 1 : Écrit (30 minutes)}
			
			Vous devez traiter la partie A du sujet. Pour cette partie, l’ordinateur est interdit mais la calculatrice (type \og collège \fg{} ou en \og mode examen \fg) est autorisée.
			
			\bigskip
			
			\textbf{Vous inscrirez vos réponses dans le document réponse à la fin du sujet.}
			
			\bigskip
			
			Les algorithmes à écrire peuvent être rédigés en \calg{langage naturel} ou en \calg{\simplevectorlogo{vectorlogo-python-notm.pdf}}.
			
			\bigskip
			
			\textbf{À la fin de l’étape 1, votre document réponse doit être remis à la personne surveillant l’épreuve.} Vous garderez le sujet.
			
			\medskip
			
			\item \textbf{Étape 2 : sur machine (30 minutes)}
			
			Vous devez traiter la partie B du sujet à l’aide d’un ordinateur. Le langage utilisé est celui travaillé dans l’année, à savoir \calg{\simplevectorlogo{vectorlogo-python-notm.pdf}}. Vous sauvegarderez votre travail sur la clé USB fournie.
			
			La durée totale pour effectuer les deux premières étapes est exactement d’une heure.
			
			\medskip
			
			\item \textbf{Étape 3 : oral (20 minutes au maximum)}
			
			Cette partie se déroule en deux temps. Tout d’abord, vous disposez de 10 minutes pour présenter votre travail de l’étape 2 puis, au cours des 10 minutes suivantes, un entretien permet de préciser votre démarche.
		\end{itemize}
		
		\textbf{À la fin de l’épreuve le sujet devra être rendu à l’examinateur.}
	\end{blocccf}%
}

\newcommand\numccf[1]{\tcbox[boxnum]{#1}}

\newtcolorbox{blocccf}[2][orange]{%
	enhanced,before skip=3mm,after skip=3mm,arc=0mm,top={\tcboxedtitleheight*3/4},
	colback=#1!15,colframe=#1!15,coltitle=white,
	attach boxed title to top left={xshift=12pt,yshift=-\tcboxedtitleheight/2},
	boxed title style={colframe=#1!75,colback=#1!75,arc=1pt},
	fonttitle=\bfseries\sffamily\large,
	title={#2}}

\newcommand\enteteccf[1]{%
	\textcolor{DarkCyan}{\LARGE\bfseries\scshape{#1}}
}

\newcommand\titreccf[2][\Huge]{%
	\textcolor{MediumPurple}{#1\bfseries\scshape{#2}}
}

\newcommand\str{\vphantom{ÉQ}}

\newcommand\tablignecc[4][]{%
	\begin{tblr}{rowsep=5pt,width=\linewidth,colspec={X[c]}}
		\hline[1.5pt,DarkCyan]
		\enteteccf{BTS SIO - Session {#4} \\ Sous-Épreuve E3 \\ \str{}Algorithmique Appliquée \\ \str{}Contrôle en Cours de Formation - #1} \\ \hline[1.5pt,DarkCyan]
		\titreccf{Sujet n°#2} \\ \titreccf{$\looparrowright$ #3 $\looparrowleft$} \\ \hline[1.5pt,MediumPurple]
	\end{tblr}
}

\newcommand\rappeltablignecc[2]{%
	\begin{tblr}{rowsep=5pt,width=\linewidth,colspec={X[c]}}
		\hline[1.5pt,MediumPurple]
		\titreccf{Sujet n°#1} \\ \titreccf{$\looparrowright$ #2 $\looparrowleft$} \\ \hline[1.5pt,MediumPurple]
	\end{tblr}
}

\tcbset{vignetteccfshell/.style={%
		fontupper={\vphantom{pf}\footnotesize\ttfamily},%
		vignettes,%
		colframe=SaddleBrown,coltitle=white,colback=SaddleBrown!5,%
		overlay={\begin{tcbclipinterior}%
				\draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{SaddleBrown}{\scalebox{0.55}[0.75]{\textbf{SHELL}}}}} ($(interior.north west)+(5pt,0pt)$);%
		\end{tcbclipinterior}}
	}
}

\newcommand\ccfshell[1]{\AffVignette[Type=shell,Couleur=Marron]{#1}}

\newcommand\ccfnph{\begin{tcolorbox}[enhanced,size=title,boxsep=6pt,boxrule=1pt,colframe=gray,colback=lightgray!5,left=2pt,right=2pt,sharp corners,rounded corners=downhill,arc=8pt]\textbf{\textsf{\large NOM Prénom : \dotfill~Heure de passage : \dotfill}}\end{tcolorbox}}

\newcommand\ccfnp{\begin{tcolorbox}[enhanced,size=title,width=0.66\linewidth,boxsep=6pt,boxrule=1pt,colframe=gray,colback=lightgray!5,left=2pt,right=2pt,sharp corners,rounded corners=downhill,arc=8pt]\textbf{\textsf{\large NOM Prénom : \dotfill~}}\end{tcolorbox}}

%listings CCF
\lstdefinelanguage{Natural}{%
	keywords={},
	inputencoding=utf8,
	comment=[l]{}
}

\lstdefinestyle{langnat}{%
	inputencoding=utf8,
	language=Natural,
	aboveskip=0pt,belowskip=0pt,
	basicstyle=\linespread{1.25}\small\ttfamily,
	keywordstyle=\bfseries,
	keepspaces=true,
	tabsize=4,numbersep=10pt,
	numbers=none,
	showstringspaces=false,
	escapeinside={(*}{*)},
	keywords = {Alors,Algorithme,Afficher,Saisir,Faire,Si,Sinon,SinonSi,TantQue,Pour,allant,de,FinSi,FinPour,FinTantQue,ou,et,Fonctions,Fonction,Retourner,ALGORITHME,Type},
	morecomment=[l][commentstyle]{\#},
	commentstyle=\itshape\color{gray},
	classoffset=0,
	keywordstyle=\bfseries\color{blue!75},
	classoffset=1, %les variables
	morekeywords = {entier,entiers,liste,listes,tableau,tableaux,flottant,flottants},
	keywordstyle=\bfseries\color{ForestGreen!75},
	classoffset=2,
	morekeywords = {Fin,Variable,Variables},
	keywordstyle=\bfseries\color{FireBrick!75},
	classoffset=0,
	morestring=[b]",
	morestring=[b]',
	stringstyle=\color{red!75},
	literate={>=}{$\geqslant$}1 {<=}{$\leqslant$}1%
	{=}{\textleftarrow}1 {==}{=}1%
	{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1%
	{ú}{{\'u}}1 {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1%
	{à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1%
	{À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1%
	{ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1%
	{Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1%
	{â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1%
	{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1%
	{œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1%
	{ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1%
	{ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1%
	{€}{{\texteuro}}1 {£}{{\pounds}}1%
	{Rôle}{{{\bfseries\color{blue!75}R{\^o}le}}}4%
	{Répéter}{{{\bfseries\color{blue!75}R\'{e}p\'{e}ter}}}7%
	{Jusqu'à}{{{\bfseries\color{blue!75}Jusqu'\`a}}}7%
	{à}{{{\bfseries\color{blue!75}\`a}}}1%
	{Début}{{{\bfseries\color{FireBrick!75}D{\'e}but}}}5%
	{utilisé}{{{\bfseries\color{blue!75}utilis{\'e}}}}7%
	{retourné}{{{\bfseries\color{blue!75}retourn{\'e}}}}8%
	{utilisés}{{{\bfseries\color{blue!75}utilis{\'e}s}}}8%
	{utilisée}{{{\bfseries\color{blue!75}utilis{\'e}e}}}8%
	{utilisées}{{{\bfseries\color{blue!75}utilis{\'e}es}}}9%
	{Paramètre}{{{\bfseries\color{blue!75}Param\`etre}}}9%
	{Paramètres}{{{\bfseries\color{blue!75}Param\`etres}}}{10}%
	{booléen}{{{\bfseries\color{ForestGreen!75}bool{\'e}en}}}7%
	{booléens}{{{\bfseries\color{ForestGreen!75}bool{\'e}ens}}}8%
	{d'entiers}{{{\bfseries\color{ForestGreen!75}d'entiers}}}9%
}

\endinput