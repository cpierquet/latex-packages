\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cp-preambule}[2024/11/24 Commandes persos de base, v1.0a]
% 1.0.a	Version initiale, avec gros nettoyage...

% ======================================base
%\RequirePackage{iftex,ifxetex,ifpdf,ifthen}

% ============les entetes [noentete/exambts]
\newif\if@entete \@entetetrue
\newif\if@boites \@boitesfalse
\newif\if@noentete \@noentetefalse
\newif\if@exambts \@exambtsfalse
\newif\if@alt \@altfalse
\newif\if@breakable \@breakablefalse

\DeclareOption{boites}{\@boitestrue}
\DeclareOption{noentete}{\@entetefalse \@noentetetrue}
\DeclareOption{exambts}{\@entetefalse \@exambtstrue}
\DeclareOption{alt}{\@alttrue}
\DeclareOption{breakable}{\@breakabletrue}

\DeclareOption*{}%si option inconnue ;-)
\ProcessOptions\relax

% ===============================Qques modifs
\AtBeginDocument{%
	\abovedisplayskip=0.33\baselineskip
	\abovedisplayshortskip=0.33\baselineskip
	\belowdisplayskip=0.33\baselineskip
	\belowdisplayshortskip=0.33\baselineskip
}

% ========================Couleurs francisées
\RequirePackage{couleurs-fr}
\definecolor{TitreMarron}{rgb}{0.64,0.16,0.16}
\definecolor{TitreBleu}{rgb}{0,0,0.6}
\definecolor{OrangeScratch}{HTML}{F8A31F}
\definecolor{graySepCell}{cmyk}{0,0,0,0.75}

%=====================================polices
\RequirePackage{realscripts}
%\DeclareSymbolFont{calletters}{OMS}{cmsy}{m}{n}
%\DeclareSymbolFontAlphabet{\mathcallig}{calletters}
\RequirePackage[mathscr]{eucal}
\if@alt
	\newfontfamily\inconso{Inconsolatazi4}
	\newfontfamily\algol{AlgolRevived}
	\newcommand\sffalt{\inconso}
	\newcommand\ttfalt{\algol}
	\newfontfamily\policeqtcanaithtype{QTCanaithtype}
	\newfontfamily\fontnwks{SourceCodePro-Medium} %numworks
	\newfontfamily\fontcalcqd{GoMono-Bold} %casio90
	\newfontfamily\fontcalctc{AnonymousPro} %casio35
	\newfontfamily\fontcasiotc{AnonymousPro} %casio35
	\newfontfamily\fontcasioqd{AlegreyaSans} %casio90
	\newfontfamily\polancienne{QTAntiquePost}
	\newcommand\policecasiotc{\fontcasiotc\bfseries\footnotesize}
	\newcommand\policecasioqd{\fontcasioqd\bfseries\footnotesize}
	\newfontfamily\poltuto{QTSanDiego}
	\newcommand\tuto[1]{{\poltuto #1}}
\fi
\newcommand\titrebox[1]{\textbf{\scalebox{0.925}[1]{#1}}}


%============================packages de base
\RequirePackage[only,llbracket,rrbracket]{stmaryrd}
\RequirePackage[normalem]{ulem}
%\RequirePackage{shellesc}
\ifthenelse{\isundefined{\euro}}{\newcommand\euro{\eurologo{}}}{\renewcommand\euro{\eurologo{}}}
\RequirePackage{hologo}
\RequirePackage{enumitem}
\RequirePackage{wrapstuff}
\RequirePackage{siunitx} %test avec v3
\sisetup{%
	locale=FR,mode=match,propagate-math-font=true,%
	reset-math-version=false,reset-text-family=false,%
	reset-text-series=false,reset-text-shape=false,%
	text-family-to-math=true,text-series-to-math=true,%
	output-decimal-marker={,},%
	group-minimum-digits=4%
}
\RequirePackage{fancyhdr}
\RequirePackage{wasysym}
\RequirePackage{systeme}
%\RequirePackage{venndiagram}
%\RequirePackage{pas-tableur}
\RequirePackage{fancyvrb}
\RequirePackage[totpages,lastpage,user]{zref}
\RequirePackage{currfile}
\RequirePackage{tabto}
\RequirePackage{decimalcomma}
\RequirePackage{logoetalab}
\RequirePackage{pictochrono}
\RequirePackage{coloredbelts}
\RequirePackage{amsopn}
\DeclareMathSymbol{;}\mathbin{operators}{'73} % \mathpunct à l'origine
\DeclareMathSymbol{]}\mathord{operators}{093} % \mathclose à l'origine
\DeclareMathSymbol{[}\mathord{operators}{091} % \mathopen à l'origine
\RequirePackage{hyperref}

%\RequirePackage{esvect}
%\RequirePackage{tcolorbox}
%\tcbuselibrary{breakable,fitting,skins,listings,listingsutf8,hooks}
%\RequirePackage{simplekv}
%\RequirePackage{listofitems}
%\RequirePackage{xstring}
%\RequirePackage{xintexpr}
%\RequirePackage{xintbinhex}
%\RequirePackage{tabularray}
%\RequirePackage{pifont}
%\RequirePackage{cancel}
%\RequirePackage{tkz-base}
%\RequirePackage{tkz-fct}
%\RequirePackage[lua]{tkz-euclide}
%\RequirePackage{tkz-tab}
%\usetikzlibrary{automata,positioning,decorations.pathreplacing,decorations.markings,arrows.meta,patterns,patterns.meta,calc,shapes.symbols,shapes.callouts}

%\RequirePackage{graphicx}
%\RequirePackage{lettrine}

% ===========================mirror et images
\newcommand\mirroir[2][VertForet]{%
	\raisebox{\depth}{\scalebox{-1}[-1]{\footnotesize\textcolor{#1}{#2}}}
}
\newcommand\minicalc[2][0.8em]{%
	\raisebox{-0.05em}{\includegraphics[height=#1]{#2}}
}

% ======================================maths
\NewDocumentCommand\ssi{}{\Leftrightarrow}
\NewDocumentCommand\txtssi{}{si, et seulement si,\xspace}
\NewDocumentCommand\pp{ s }{\IfBooleanTF{#1}{\leq}{\leqslant}}
\NewDocumentCommand\pg{ s }{\IfBooleanTF{#1}{\geq}{\geqslant}}
\NewDocumentCommand\vect{ m }{\vv{#1}}
\NewDocumentCommand\mclp{ m m }{\underset{\mathclap{#2}}{#1}}

% ======================gras en mode (sf)math ? test...
\usepackage{bm}
\newcommand\grasmaths[1]{\bm{#1}}
\newcommand\sfbmath[1]{\bm{\mathsf{#1}}}

% ==============styles persos et mise en page
\newcommand\lycee{Lycée Edmé Bouchardon}
\newcommand\logolycee{$\vcenter{\hbox{\includegraphics[height=0.9\baselineskip]{logo_lycee}}}$}
\newcommand\logopython{$\vcenter{\hbox{\includegraphics[height=0.9\baselineskip]{logopython}}}$}
\setlength{\parindent}{0pt}

\setKVdefault[numerotpage]{Sep={/},Ref=LastPage,Total=true}
\NewDocumentCommand\NumeroPage{ O{} }{%
	\useKVdefault[numerotpage]%
	\setKV[numerotpage]{#1}%
	\ifboolKV[numerotpage]{Total}%
		{%
			\xintifboolexpr{\ztotpages == 1}{}{- \thepage{\useKV[numerotpage]{Sep}}\zpageref{\useKV[numerotpage]{Ref}} -}%
		}%
		{%
			\xintifboolexpr{\ztotpages == 1}{}{- \thepage{} -}%
		}%
}

\newcommand\nomprenomtcbox{%
	\begin{tcolorbox}[enhanced,size=title,boxsep=6pt,boxrule=1pt,colframe=gray,colback=lightgray!5,left=2pt,right=2pt,sharp corners,rounded corners=downhill,arc=8pt]\textbf{\textsf{\large NOM : \dotfill~Prénom : \dotfill}}\end{tcolorbox}%
}

% \newcommand\AppelProf{%
	% \tcbox[size=small,on line,colback=white,left=0pt,right=0pt,boxsep=2pt]{\tuto{{\tiny\faUserTie} {\scriptsize Appel possible au professeur !}}}%
% }

% \tcbuselibrary{raster}
% \newtcolorbox{fiche}{sharp corners=uphill,colback=black!66,colupper=white,fontupper=\centering\scshape\bfseries\LARGE}
% \newtcolorbox{onglet}[2][]{enhanced,
	% before skip=3mm,after skip=3mm,
	% colback=black!5,colframe=black!80,boxrule=0.2mm,
	% attach boxed title to top left={xshift=1cm,yshift*=1mm-\tcboxedtitleheight},
	% varwidth boxed title*=-3cm,
	% boxed title style={frame code={
			% \path[fill=tcbcolback!30!black]
			% ([yshift=-1mm,xshift=-1mm]frame.north west)
			% arc[start angle=0,end angle=180,radius=1mm]
			% ([yshift=-1mm,xshift=1mm]frame.north east)
			% arc[start angle=180,end angle=0,radius=1mm];
			% \path[left color=tcbcolback!60!black,right color=tcbcolback!80!black,
			% middle color=tcbcolback!70!black]
			% ([xshift=-2mm]frame.north west) -- ([xshift=2mm]frame.north east)
			% [rounded corners=1mm]-- ([xshift=1mm,yshift=-1mm]frame.north east)
			% -- (frame.south east) -- (frame.south west)
			% -- ([xshift=-1mm,yshift=-1mm]frame.north west)
			% [sharp corners]-- cycle;
		% },interior engine=empty,
	% },
	% fonttitle=\bfseries,
	% title={#2},#1
% }

% \newtcolorbox{marker}[1][]{enhanced,width=7cm,before skip=2mm,after skip=3mm,fontupper=\small\sffamily,%
	% boxrule=0.4pt,left=5mm,right=2mm,top=1pt,bottom=1pt,colback=yellow!15,colframe=yellow!20!black,%
	% sharp corners,rounded corners=southeast,arc is angular,arc=3mm,center,%
	% underlay={%
		% \path[fill=tcbcolback!80!black] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
		% \path[draw=tcbcolframe,shorten <=-0.05mm,shorten >=-0.05mm] ([yshift=3mm]interior.south east)--++(-0.4,-0.1)--++(0.1,-0.2);
	% },%
	% drop fuzzy shadow,#1
% }

% ====================================entêtes
\if@entete
	\RequirePackage{geometry}
	\geometry{left=12.5mm,right=12.5mm,top=12.5mm,bottom=15mm,headsep=2.5mm,headheight=14pt,footskip=6mm}%showframe
\fi

\if@noentete
	\RequirePackage[left=13mm,right=13mm,top=13mm,bottom=18mm]{geometry}
\fi

\if@exambts
	\renewcommand{\headrulewidth}{0pt}
	\RequirePackage[left=13mm,right=13mm,top=13mm,bottom=18mm]{geometry}
	\setlength{\textheight}{24.75cm}
	\setlength{\footskip}{20mm}
\fi

\NewDocumentCommand\entete{ s O{0.85} m }{%
	\IfBooleanTF{#1}%
		{\textcolor{violet}{\scriptsize #3}}%
		{\textcolor{violet}{\scriptsize\sffamily\scalebox{#2}[#2]{#3}}}%
}

\NewDocumentCommand\pied{ s O{0.85} m }{%
	\IfBooleanTF{#1}%
		{\textcolor{violet}{\scriptsize #3}}%
		{\textcolor{violet}{\scriptsize\sffamily\scalebox{#2}[#2]{#3}}}%
}

\NewDocumentCommand\LicenceDocEtalabH{ s O{violet} }{%
	\IfBooleanTF{#1}%
		{%
			\affloetalab*[Couleur=#2]%
		}%
		{%
			\affloetalab*[Couleur=#2,Legende,TexteLegende={Licence Ouverte Etalab 2.0}]%
		}%
}

\NewDocumentCommand\LicenceDocEtalabV{ s O{violet} }{%
	\IfBooleanTF{#1}%
		{%
			\affloetalab[Couleur=#2]%
		}%
		{%
			\affloetalab[Couleur=#2,Legende,TexteLegende={Licence Ouverte Etalab 2.0}]%
		}%
}

% =================lignes, pointillés, écarts
\newcommand\pointille[1][1cm]{\makebox[#1]{\dotfill}}
\newcommand\ecartp{$\vphantom{A^{2^2}A_{2_2}}$}
\newcommand\ecartg{$\vphantom{\left(\dfrac{A^{2^2}}{A_{2_2}}\right)}$}
\newcommand\decalt{\hspace*{4ex}}
\newcommand\CentreNombre[1]{\raisebox{-0.5\depth}{#1\vphantom{gjqypkhlQABNS}}}

% =====================environnements customs
\RequirePackage{customenvs}

% =============================titre/sections
\RequirePackage{titlesec}
\RequirePackage[fr-FR]{datetime2}

\defKV[donnees]{%
	nomfichier=\def\DonneesNomFichier{#1},%
	typedoc=\def\DonneesTypeDoc{#1},%
	numdoc=\def\DonneesNumDoc{#1},%
	classe=\def\DonneesClasse{#1},%
	matiere=\def\DonneesMatiere{#1},%
	mois=\def\DonneesMois{#1},%
	annee=\def\DonneesAnnee{#1},%
	duree=\def\DonneesDuree{#1},%
	titre=\def\DonneesTitre{#1},%
	tailletitre=\def\DonneesTailleTitre{#1},%
	margetitre=\def\DonneesMargeTitre{#1}
}

\setKVdefault[donnees]{%
	nomfichier=\currfilebase,%
	typedoc=DOC~,%
	numdoc=1,%
	classe={<classe>},%
	matiere={<matiere>},%
	mois={\DTMfrenchMonthname{\@dtm@month}},%
	annee={\@dtm@year},%
	duree={<duree>},%
	titre={},%
	tailletitre=\huge,%
	margetitre=0cm
}

\NewDocumentCommand\donnees{ O{} }{%avec compatibilité anciens documents (sinon utiliser \DonneesXXXX)
	\useKVdefault[donnees]%
	\setKV[donnees]{#1}%
	%\newcommand\nomfichier{\DonneesNomFichier}
	%\newcommand\typedoc{\DonneesTypeDoc}
	%\newcommand\numdoc{\DonneesNumDoc}
	\setcounter{part}{\DonneesNumDoc}
	\addtocounter{part}{-1}
	\renewcommand\thepart{\ifnum\value{part}<10\relax0\fi\arabic{part}}
	%\newcommand\classe{\Donneesclasse}
	%\newcommand\matiere{\Donneesmatiere}
	%\newcommand\mois{\DonneesMois}
	%\newcommand\annee{\DonneesAnnee}
	%\newcommand\duree{\DonneesDuree}
	%\newcommand\titredoc{\DonneesTitre}
}

%====OLD VERSION
% \titleformat{\part}[frame]
	% {\setlength\fboxrule{1pt}\color{TitreMarron}\bfseries\sffamily}
	% {\filright\:\vphantom{Ppé}\DonneesTypeDoc\thepart\:}
	% {2pt}
	% {\DonneesTailleTitre\bfseries\filcenter}
	% {}

% \titlespacing*{\part}
	% {\DonneesMargeTitre}
	% {-0.6\baselineskip}
	% {0.2\baselineskip}
	% [\DonneesMargeTitre]

%====TEST RENEW PART STYLE 2024 (customenvs)
\RenewDocumentCommand\part{ s m D<>{} }{%
	\addtocounter{part}{1}%
	\IfBooleanTF{#1}%
	{%
		\tkzBannerTri[#3,num=false]{\thepart}{#2}%
	}%
	{%
		\tkzBannerTri[#3]{\thepart}{#2}%
		\addcontentsline{toc}{part}{#2}%
	}%
}

\titlespacing*{\part}{0pt}{-0.5\baselineskip}{0.25\baselineskip}
\titleformat{\section}[hang]{\color{TitreBleu}\LARGE\bfseries\sffamily}{\Roman{section}.}{1ex}{}
\titlespacing{\section}{3mm}{0.15\baselineskip}{0.15\baselineskip}
\titleformat{\subsection}[hang]{\color{VertForet}\Large\bfseries\sffamily}{\hspace{6mm}\Roman{section}.\arabic{subsection}.}{1ex}{}
\titlespacing{\subsection}{6mm}{0.15\baselineskip}{0.15\baselineskip}
\titleformat{\subsubsection}[hang]{\color{purple}\large\bfseries\sffamily}{\hspace{9mm}\Roman{section}.\arabic{subsection}.\alph{subsubsection}.}{1ex}{}
\titlespacing{\subsubsection}{9mm}{0.15\baselineskip}{0.15\baselineskip}

% ============================listes et puces
\setenumerate[1]{font=\color{red}\bfseries}
\setenumerate[2]{font=\color{blue}\bfseries,label=\alph*.}
\setenumerate[3]{font=\color{VertForet}\bfseries,label=\roman*.}

\newcommand\ptno[1]{\textbf{\textcolor{red}{#1.}}}
\newcommand\pta[1]{\textbf{\textcolor{blue}{#1.}}}
\newcommand\pti[1]{\textbf{\textcolor{VertForet}{#1.}}}

% =======================================exos
% \newcounter{numexos}
% \setcounter{numexos}{0}
% \NewDocumentCommand\niveaudif{ m }{%
	% \xdef\numniv{#1}%
	% \xintifboolexpr{\numniv >= 0 'and' \numniv <= 5}%
		% {%
			% $\vcenter{\hbox{\includegraphics[height=18pt]{goku_ssj#1}}}$
		% }%
		% {}%
% }
% \NewDocumentCommand\niveauseiya{ m }{%
	% $\vcenter{\hbox{\includegraphics[height=18pt]{sseiya_#1}}}$
% }

% \defKV[EnvtExercice]{%
	% Type=\def\EnvtExoType{#1},%
	% ComplementTitre=\def\EnvtExoCpltTitre{#1},%
	% Titre=\def\EnvtExoTitre{#1},%
	% CodeDebut=\def\EnvtExoCodeAvant{#1}
% }

% \setKVdefault[EnvtExercice]{
	% Type=Classique,%
	% ComplementTitre={},%
	% Titre={},%
	% CodeDebut={},%
	% Compteur=true
% }

% \NewDocumentEnvironment{CPExercice}{ !O{} }%
% {%
	% \useKVdefault[EnvtExercice]%
	% \setKV[EnvtExercice]{#1}%
	% \addtocounter{numexos}{1}%
	% \def\hrulefill{\leavevmode\leaders\hrule height 1.1pt\hfill\kern\z@}%épaisseur
	% \IfStrEq{\EnvtExoType}{Classique}%
		% {%
			% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Niveau}%
		% {%
			% \IfSubStr{\EnvtExoType}{/}
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoDiff]%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill\niveaudif{\EnvtExoDiff}}}%
					% }%
				% }%
				% {%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
					% }%
				% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Icone}%
		% {%
			% \IfSubStr{\EnvtExoType}{/}
			% {%
				% \StrBehind{\EnvtExoType}{/}[\EnvtExoIcon]%
				% {%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill\,\scalebox{0.85}[0.85]{\EnvtExoIcon}}}%
				% }%
			% }%
			% {%
				% {%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
				% }%
			% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Ceinture}%
		% {%
			% \IfSubStr{\EnvtExoType}{/}
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoCouleur]%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill\CeintureCouleur{\EnvtExoCouleur}}}%
					% }%
				% }%
				% {%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
					% }%
				% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Chrono}%
		% {%
			% \IfSubStr{\EnvtExoType}{/}
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoChrono]%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill~\pictochrono[ColTime=TitreBleu!50]{\EnvtExoChrono}}}%
					% }%
				% }%
				% {%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
					% }%
				% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Zodiaque}%
		% {%
			% \IfSubStr{\EnvtExoType}{/}
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoSigne]%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill\niveauseiya{\EnvtExoSigne}}}%
					% }%
				% }%
				% {%
					% {%
						% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill}}%
					% }%
				% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Points}%
		% {%
			% \StrBehind{\EnvtExoType}{/}[\EnvtExoPts]%
			% \IfStrEq{\EnvtExoPts}{1}%
				% {%
					% \def\pts{point}%
				% }%
				% {%
					% \def\pts{points}%
				% }%
			% {%
				% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{Exercice \thenumexos\EnvtExoCpltTitre~\hrulefill(\num{\EnvtExoPts} \pts)}}%
			% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{Generique}%
		% {%
			% \ifboolKV[EnvtExercice]{Compteur}{}{\addtocounter{numexos}{-1}}%
			% \StrCount{\EnvtExoType}{/}[\nbparamtitre]%
			% \xintifboolexpr{\nbparamtitre == 2}%
				% {%
					% \StrBetween[1,2]{\EnvtExoType}{/}{/}[\EnvtExoTitre]%
					% \StrBehind[2]{\EnvtExoType}{/}[\EnvtExoIcon]%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{\EnvtExoTitre\hfill\scalebox{0.85}[0.85]{\EnvtExoIcon}}}%
				% }%
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoTitre]%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{\EnvtExoTitre}}%
				% }%
		% }{}%
	% \IfSubStr{\EnvtExoType}{GenTrait}%
		% {%
			% \ifboolKV[EnvtExercice]{Compteur}{}{\addtocounter{numexos}{-1}}%
			% \StrCount{\EnvtExoType}{/}[\nbparamtitre]%
			% \xintifboolexpr{\nbparamtitre == 2}%
				% {%
					% \StrBetween[1,2]{\EnvtExoType}{/}{/}[\EnvtExoTitre]%
					% \StrBehind[2]{\EnvtExoType}{/}[\EnvtExoIcon]%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{\EnvtExoTitre~\hrulefill\,\scalebox{0.85}[0.85]{\EnvtExoIcon}}}%
				% }%
				% {%
					% \StrBehind{\EnvtExoType}{/}[\EnvtExoTitre]%
					% \textbf{\sffamily\LARGE\textcolor{TitreBleu}{\EnvtExoTitre~\hrulefill}}%
				% }%
		% }{}%
	% \def\hrulefill{\leavevmode\leaders\hrule height 0.4pt\hfill\kern\z@}%
	% \par
	% \EnvtExoCodeAvant%
% }%
% {}%

%===================================vignettes
% \tcbset{vignettelogo/.style={%
		% fontupper={\tiny \textcolor{VertForet}{\faPython}}\:\vphantom{pf}\small\ttfamily,%
		% nobeforeafter,box align=base,boxsep=0pt,enhanced,sharp corners=all,rounded corners=southeast,%
		% boxrule=0.75pt,left=1pt,right=1pt,top=0pt,bottom=0.25pt,%
		% colframe=green,coltitle=green!75!black,colback=VertForet!5,%
		% before upper = \vphantom{pf},
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=VertForet!33,fill=VertForet!33]($(interior.south west)$) rectangle ($(interior.north west)+(7pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettes/.style={%
		% nobeforeafter,box align=base,boxsep=0pt,enhanced,sharp corners=all,rounded corners=southeast,%
		% boxrule=0.75pt,left=7pt,right=1pt,top=0pt,bottom=0.25pt,%
		%before upper={{\normalsize \vphantom{pf}}}
	% }
% }

% \tcbset{vignettepy/.style={%
		% fontupper={\vphantom{pf}\footnotesize\ttfamily},%
		% vignettes,%
		% colframe=VertForet,coltitle=VertForet,colback=VertForet!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{VertForet!75!black}{\scalebox{0.55}[0.75]{\textbf{PY}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettepyccf/.style={%
		% fontupper={\vphantom{pf}\footnotesize},%
		% vignettes,%
		% colframe=VertForet,coltitle=VertForet!75!black,colback=VertForet!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{VertForet!75!black}{\scalebox{0.55}[0.75]{\textbf{PY}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettealgo/.style={%
		% fontupper={\vphantom{pf}\footnotesize\ttfamily},%
		% vignettes,%
		% colframe=darkgray,coltitle=white,colback=darkgray!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{darkgray}{\scalebox{0.55}[0.75]{\textbf{ALGO}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettetableur/.style={%
		% fontupper={\vphantom{pf}\footnotesize\sffamily},%
		% vignettes,%
		% colframe=xVertOcean,coltitle=white,colback=white,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=xVertOcean!25,fill=xVertOcean!25]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{darkgray}{\scalebox{0.5}[0.75]{\textbf{EXCEL}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignetteMPM/.style={%
		% fontupper={\vphantom{(q)}\small},%
		% vignettes,%
		% colframe=Noisette,coltitle=white,colback=white,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=Noisette!25,fill=Noisette!25]($(interior.south west)$) rectangle node[rotate=90]{\tiny\sffamily{\textcolor{darkgray}{\scalebox{0.45}[0.75]{\textbf{GRAPHE}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettealgopython/.style={%
		%fontupper={\vphantom{pf}\footnotesize\sffamily},%
		% vignettes,%
		% right=2pt,%
		% colframe=darkgray,coltitle=white,colback=white,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{darkgray}{\scalebox{0.55}[0.75]{\textbf{ALGO}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettegraph/.style={%
		% fontupper={\vphantom{pf}\footnotesize\sffamily},%
		% vignettes,%
		% colframe=VertJaune,coltitle=white,colback=white,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=VertJaune!25,fill=VertJaune!25]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{darkgray}{\scalebox{0.55}[0.75]{\textbf{GRPH}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettegraphtikz/.style={%
		% vignettes,top=2pt,bottom=2pt,%
		% colframe=VertJaune,coltitle=white,colback=white,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=VertJaune!25,fill=VertJaune!25]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{darkgray}{\scalebox{0.55}[0.75]{\textbf{GRPH}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignetteshell/.style={%
		% fontupper={\vphantom{pf}\footnotesize\sffamily},%
		% vignettes,%
		% colframe=Marron,coltitle=white,colback=Marron!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[color=lightgray!50,fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{Marron}{\scalebox{0.55}[0.75]{\textbf{SHELL}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettelatex/.style={%
		% fontupper={\vphantom{pf}\footnotesize\ttfamily},
		% vignettes,%
		% colframe=BleuTurquoise,coltitle=white,colback=BleuTurquoise!5,%
		% underlay={\begin{tcbclipinterior}%
				% \fill[fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{BleuTurquoise}{\scalebox{0.6}[0.75]{\textbf{\LaTeX}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettexcas/.style={%
		% fontupper={\vphantom{pf}\footnotesize\sffamily},
		% vignettes,%
		% colframe=RougeOrange,coltitle=white,colback=RougeOrange!5,%
		% underlay={\begin{tcbclipinterior}%
				% \fill[fill=lightgray!50]($(interior.south west)$) rectangle node[rotate=90]{\tiny \sffamily{\textcolor{RougeOrange}{\scalebox{0.55}[0.75]{\textbf{XCAS}}}}} ($(interior.north west)+(5pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettecrypt/.style={%
		% fontupper={\vphantom{pf}\footnotesize\ttfamily},
		% vignettes,%
		% left=10pt,right=2pt,colframe=Or,coltitle=white,colback=Or!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[Or!25,fill=Or!25]($(interior.south west)$) rectangle node[]{\tiny \textcolor{Or!75!black}{\scalebox{0.95}[1]{\faKey}}} ($(interior.north west)+(8pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

% \tcbset{vignettesoluce/.style={%
		% fontupper={\vphantom{pf}\footnotesize},%
		% vignettes,%
		% top=1.25pt,bottom=1.25pt,left=10pt,right=2pt,%
		% colframe=Lavande,coltitle=white,colback=Lavande!5,%
		% underlay={\begin{tcbclipinterior}%
				% \draw[Lavande!25,fill=Lavande!25]($(interior.south west)$) rectangle node[]{\tiny \textcolor{Lavande!75!black}{\scalebox{0.95}[1]{\faCheckCircle}}} ($(interior.north west)+(8pt,0pt)$);%
		% \end{tcbclipinterior}}
	% }
% }

%(avec customenvs ?)
\NewDocumentCommand\cpy{ s O{CouleurVertForet} m }{\IfBooleanTF{#1}{\AffVignette*[Type=py,Couleur=#2]{#3}}{\AffVignette[Type=py,Couleur=#2]{#3}}}
\NewDocumentCommand\calg{ s O{darkgray} m }{\IfBooleanTF{#1}{\AffVignette*[Type=algo,Couleur=#2]{#3}}{\AffVignette[Type=algo,Couleur=#2]{#3}}}
\NewDocumentCommand\cpypit{ s O{CouleurVertForet} m }{\IfBooleanTF{#1}{\AffVignette*[Type=pypit,Couleur=#2]{#3}}{\AffVignette[Type=pypit,Couleur=#2]{#3}}}
\NewDocumentCommand\cpypyl{ s O{CouleurVertForet} m }{\IfBooleanTF{#1}{\AffVignette*[Type=pyl,Couleur=#2]{#3}}{\AffVignette[Type=pyl,Couleur=#2]{#3}}}
\NewDocumentCommand\cgrph{ s O{VertJaune} m }{\IfBooleanTF{#1}{\AffVignette*[Type=graph,Couleur=#2]{#3}}{\AffVignette[Type=graph,Couleur=#2]{#3}}}
\NewDocumentCommand\cmpm{ s O{Noisette} m }{\IfBooleanTF{#1}{\AffVignette*[Type=mpm,Couleur=#2]{#3}}{\AffVignette[Type=mpm,Couleur=#2]{#3}}}
\NewDocumentCommand\cxcas{ s O{RougeOrange} m }{\IfBooleanTF{#1}{\AffVignette*[Type=xcas,Couleur=#2]{#3}}{\AffVignette[Type=xcas,Couleur=#2]{#3}}}
\NewDocumentCommand\cshell{ s O{Marron} m }{\IfBooleanTF{#1}{\AffVignette*[Type=shell,Couleur=#2]{#3}}{\AffVignette[Type=shell,Couleur=#2]{#3}}}
\NewDocumentCommand\ctex{ s O{BleuTurquoise} m }{\IfBooleanTF{#1}{\AffVignette*[Type=tex,Couleur=#2]{#3}}{\AffVignette[Type=tex,Couleur=#2]{#3}}}
\NewDocumentCommand\csheet{ s O{xVertOcean} m }{\IfBooleanTF{#1}{\AffVignette*[Type=sheet,Couleur=#2,Police=\footnotesize\sffamily]{#3}}{\AffVignette[Type=sheet,Couleur=#2,Police=\footnotesize\sffamily]{#3}}}

%\NewDocumentCommand\VignetteTableur{ m }{\AffVignette*[Type=sheet,Couleur=xVertOcean,Police=\footnotesize\sffamily]{#1}}

\RequirePackage{vectorlogos}
\GenMacroLogoVect{\logopythonvect}{python}

\newcommand\csoluce[1]{\tcbox[vignettesoluce]{#1}}
%\newcommand\calgpython{\tcbox[vignettealgopython]{$\vcenter{\hbox{\includegraphics[height=0.78\baselineskip]{logopython}}}$}}
\newcommand\calgpython{\calg{\logopythonvect[notm]}}
\newcommand\calgscratch{\tcbox[vignettealgopython]{$\vcenter{\hbox{\includegraphics[height=0.78\baselineskip]{logoscratch}}}$}}
\newcommand\calgpythonccf{\tcbox[vignettealgopython]{\simplevectorlogo{vectorlogo-python-notm.pdf}}}

\NewDocumentCommand\ccalc{ s O{teal} m }{\IfBooleanTF{#1}{\AffVignette*[Type=perso/CASIO,Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}{\AffVignette[Type=perso/CASIO,Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}}
\NewDocumentCommand\ccalt{ s O{teal} m }{\IfBooleanTF{#1}{\AffVignette*[Type=perso/TEXAS,Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}{\AffVignette[Type=perso/TEXAS,Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}}
\NewDocumentCommand\ccaln{ s O{teal} m }{\IfBooleanTF{#1}{\AffVignette*[Type=perso/NWKS,Couleur=#2,Echelle=0.55,Police=\small\ttfamily]{#3}}{\AffVignette[Type=perso/NWKS,Couleur=#2,Echelle=0.55,Police=\small\ttfamily]{#3}}}
\NewDocumentCommand\ccalg{ s O{teal} m }{\IfBooleanTF{#1}{\AffVignette*[Type={perso/CALC.},Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}{\AffVignette[Type={perso/CALC.},Couleur=#2,Echelle=0.5,Police=\small\ttfamily]{#3}}}

\newcommand\keywordstyle[1]{{\bfseries{#1}}}%
\newcommand\algomathtt[1]{\symtt{#1}}

%=============================boîtes de cours
\if@boites
\newfontfamily\policetititreboite{Mint Spirit}
\newcommand\fontbox{\policetititreboite}
%les compteurs et utiles, à voir pour réutiliser customenvs ?
\newcounter{MaquetteExo}%Numéro des exercices
\setcounter{MaquetteExo}{0}%
\newcounter{MaquetteDefi}%Numéro des définitions
\setcounter{MaquetteDefi}{0}%
\newcounter{MaquetteHumour}%Numéro des humours
\setcounter{MaquetteHumour}{0}%
\newcounter{MaquetteProp}%Numéro des props
\setcounter{MaquetteProp}{0}%
\newcounter{MaquetteCscq}%Numéro des csqcs
\setcounter{MaquetteCscq}{0}%
\newcounter{MaquetteThm}%Numéro des thms
\setcounter{MaquetteThm}{0}%
\newcounter{MaquetteLog}%Numéro des logs
\setcounter{MaquetteLog}{0}%
\newcounter{MaquetteHistoire}%Numéro des histoires 
\setcounter{MaquetteHistoire}{0}%
\newcounter{MaquetteRemarque}%Numéro des remarques
\setcounter{MaquetteRemarque}{0}%
\newcounter{MaquetteExemple}%Numéro des exemples
\setcounter{MaquetteExemple}{0}%
\newcounter{MaquetteVocabulaire}%Numéro des vocs
\setcounter{MaquetteVocabulaire}{0}%
\newcounter{MaquetteNotation}%Numéro des nota
\setcounter{MaquetteNotation}{0}%
\newcounter{MaquetteCadre}%Numéro des cadre
\setcounter{MaquetteCadre}{0}%
\newcounter{MaquetteIdee}%Numéro des idee
\setcounter{MaquetteIdee}{0}%
\newcounter{MaquetteIntro}%Numéro des intro
\setcounter{MaquetteIntro}{0}%
\newcounter{MaquetteIllustration}%Numéro des illustr
\setcounter{MaquetteIllustration}{0}%
\newcounter{MaquetteVideo}%Numéro des video
\setcounter{MaquetteVideo}{0}%
\newcounter{MaquetteBilan}%Numéro des bilan
\setcounter{MaquetteBilan}{0}%
\newcounter{MaquetteMethode}%Numéro des methode
\setcounter{MaquetteMethode}{0}%
\newcounter{MaquetteTuto}%Numéro des tuto
\setcounter{MaquetteTuto}{0}%
\newcounter{MaquetteManipulation}%Numéro des manip
\setcounter{MaquetteManipulation}{0}%
\newcounter{MaquetteCalculatrice}%Numéro des calco
\setcounter{MaquetteCalculatrice}{0}%
\newcounter{MaquetteOutil}%Numéro des outils
\setcounter{MaquetteOutil}{0}%
\newcounter{MaquetteAsavoir}%Numéro des asavoir
\setcounter{MaquetteAsavoir}{0}%
\newcounter{MaquetteTD}%Numéro des td
\setcounter{MaquetteTD}{0}%
\newcounter{MaquetteAvousdejouer}%Numéro des avousdejouer
\setcounter{MaquetteAvousdejouer}{0}%
\newcounter{MaquetteRappel}%Numéro des rappel
\setcounter{MaquetteRappel}{0}%
\newcounter{MaquetteResolution}%Numéro des resol
\setcounter{MaquetteResolution}{0}%
\newcounter{MaquetteAttention}%Numéro des attention
\setcounter{MaquetteAttention}{0}%
\newcounter{MaquetteCode}%Numéro des code
\setcounter{MaquetteCode}{0}%
\newcounter{MaquettePython}%Numéro des python
\setcounter{MaquettePython}{0}%
\newcounter{MaquetteDemo}%Numéro des demo
\setcounter{MaquetteDemo}{0}%
\newcounter{MaquetteAlgo}%Numéro des algo
\setcounter{MaquetteAlgo}{0}%
\newcounter{MaquetteScratch}%Numéro des scratch
\setcounter{MaquetteScratch}{0}%
\newcounter{MaquetteReponse}%Numéro des reponse
\setcounter{MaquetteReponse}{0}%
\newcounter{MaquetteAide}%Numéro des aide
\setcounter{MaquetteAide}{0}%

\defKV[Boites]{%
	ComplementTitre=\def\BoxCpltTitle{#1},%
	NivDiff=\def\BoxNivDiff{#1},%
	Points=\def\BoxBaremeExo{#1},%
	SousTitre=\def\BoxSubTitle{#1},%
	Logo=\def\BoxLogo{#1},%
	Modele=\def\BoxModCalc{#1},
	ModifLabel=\xdef\BoxModifLabel{#1}
}

\setKVdefault[Boites]{%
	Pluriel=false,%
	ComplementTitre={},%
	NivDiff={},%
	Points={},%
	SousTitre={},
	Compteur=true,%
	Logo={},%
	Modele={},%
	ModifLabel={}
}

\if@breakable
	\tcbset{cpbaseboite/.style={
		enhanced,sharp corners=uphill,boxrule=1.25pt,%
		before skip=0.5em,after skip=0.5em,%
		breakable,colback=white,top=4mm,%
		left={4mm-3pt-1.25pt},right={4mm-3pt-1.25pt}
		}%
	}
\else
	\tcbset{cpbaseboite/.style={
		enhanced,sharp corners=uphill,boxrule=1.25pt,%
		before skip=0.5em,after skip=0.5em,
		colback=white,top=4mm,%
		left={4mm-3pt-1.25pt},right={4mm-3pt-1.25pt}
		}%
	}
\fi

\NewDocumentCommand\TitreBoiteCP{ m m m m }{%1=color,%2=icone,%3=nom,%4=compteur
	\node[inner sep=3pt,rounded corners=3pt,draw=#1,line width=1.25pt,rectangle,fill=#1!5!white,anchor=west,xshift=4mm,text=#1!25!black,font=\bfseries] at (frame.north west) {\,{\small#2}~\titrebox{\policetititreboite \vphantom{Ppé}#3\ifboolKV[Boites]{Pluriel}{s}{}\IfStrEq{\BoxModifLabel}{}{}{\BoxModifLabel}\ifboolKV[Boites]{Compteur}{~#4}{}\IfStrEq{\BoxCpltTitle}{}{}{\BoxCpltTitle}}\,} ;
}

\NewDocumentCommand\SousTitreBoiteCP{ }{%
	\node[fill=white,anchor=east,xshift=-4mm,text=red!75!black,font=\small\bfseries\policetititreboite] at (frame.north east) {\vphantom{Ppé}\BoxSubTitle};
	%\node[inner sep=3pt,draw=tcbcolframe,denselly dashed,line width=1.25pt,fill=white,signal,signal from=right,anchor=east,xshift=-4mm,text=red!75!black,font=\bfseries\policetititreboite] at (frame.north east) {\vphantom{Ppé}\BoxSubTitle};
}

\NewDocumentCommand\niveaudifgoku{ m }{%
	$\vcenter{\hbox{\includegraphics[height=24pt]{goku_ssj#1}}}$%
}

\NewDocumentCommand\NiveauDifficulte{ }{%
	\node[fill=white,inner sep=2pt] at (frame.west) {\niveaudifgoku{\BoxNivDiff}} ;
}

\NewDocumentCommand\LogoCoinDroitCP{ }{%
	\begin{tcbclipinterior}\node[opacity=0.33,rotate=-45] at ($(interior.south east)+(-10pt,10pt)$){\includegraphics[height=24pt]{\BoxLogo}};\end{tcbclipinterior}%
}

\NewDocumentCommand\ModeleCoinDroitCP{ }{%
	\begin{tcbclipinterior}\node[opacity=0.33,rotate=-45] at ($(interior.south east)+(-10pt,10pt)$){\includegraphics[height=48pt]{\BoxModCalc}};\end{tcbclipinterior}%
}

\NewDocumentCommand\BaremeBoite{ }{%
	\node[fill=white,anchor=east,xshift=-4mm,text=red!75!black,font=\bfseries] at (frame.north east) {\titrebox{\policetititreboite (\num{\BoxBaremeExo} point\xintifboolexpr{\BoxBaremeExo > 1}{s}{})}};
}

\NewDocumentEnvironment{cdefi}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteDefi}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=VertForet,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{VertForet}{\faIcon[regular]{comment-dots}}{Définition}{\theMaquetteDefi}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}%
{\endtcolorbox}%

\NewDocumentEnvironment{cexo}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteExo}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=BleuNuit,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{BleuNuit}{\faHubspot}{Exercice}{\theMaquetteExo}
			\IfStrEq{\BoxNivDiff}{}{}{\NiveauDifficulte}%
			\IfStrEq{\BoxBaremeExo}{}{}{\BaremeBoite}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{chumour}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteHumour}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=yellow,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{yellow}{\faIcon[regular]{laugh-wink}}{Humour}{\theMaquetteHumour}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cprop}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteProp}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Saumon,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Saumon}{\faCog}{Propriété}{\theMaquetteProp}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{ccscq}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteCscq}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Saumon,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Saumon}{\faArrowAltCircleRight[regular]}{Conséquence}{\theMaquetteCscq}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cthm}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteThm}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Brique,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Brique}{\faBullhorn}{Théorème}{\theMaquetteThm}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{chistoire}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteHistoire}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Caramel,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Caramel}{\faUniversity}{Point histoire}{\theMaquetteHistoire}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{crmq}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteRemarque}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=BleuNuit,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{BleuNuit}{\faHandPointRight[regular]}{Remarque}{\theMaquetteRemarque}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cexemple}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteExemple}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=TurquoiseInter,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{TurquoiseInter}{\faHubspot}{Exemple}{\theMaquetteExemple}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cvoc}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteVocabulaire}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=CitronVertFonce,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{CitronVertFonce}{\faList*[regular]}{Vocabulaire}{\theMaquetteVocabulaire}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cnota}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteNotation}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Emeraude,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Emeraude}{\faList*}{Notation}{\theMaquetteNotation}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{ccadre}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteCadre}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Perou,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Perou}{\faInfoCircle}{Cadre}{\theMaquetteCadre}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cidee}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteIdee}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=BleuClair,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{BleuClair}{\faInfo}{Idée}{\theMaquetteIdee}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cintro}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteIntro}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=SaumonClair,#2,%
		overlay={%
			\tikzset{overlay=false}
			\TitreBoiteCP{SaumonClair}{\faMarker}{Intro}{\theMaquetteIntro}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cillustr}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteIllustration}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Cramoisi,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Cramoisi}{\faChartLine}{Illustration}{\theMaquetteIllustration}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cvideo}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteVideo}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=teal,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{teal}{\faIcon[regular]{file-video}}{Vidéo}{\theMaquetteVideo}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cbilan}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteBilan}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=purple,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{purple}{\faForward}{Bilan}{\theMaquetteBilan}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cmethode}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteMethode}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Corail,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Corail}{\faTasks}{Méthode}{\theMaquetteMethode}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{ctuto}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteTuto}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Corail,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Corail}{\faTerminal}{Tuto}{\theMaquetteTuto}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cmanip}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteManipulation}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=CyanFonce,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{CyanFonce}{\faCodeBranch}{Manipulation}{\theMaquetteManipulation}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{ccalco}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteCalculatrice}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=VioletInter,#2,%
		overlay unbroken and first={%
			\IfStrEq{\BoxModCalc}{}{}{\ModeleCoinDroitCP}%
			\tikzset{overlay=false}
			\TitreBoiteCP{VioletInter}{\faCalculator}{Calculatrice}{\theMaquetteCalculatrice}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{coutil}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteOutil}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=BleuCielIntense,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{BleuCielIntense}{\faTools}{Outil}{\theMaquetteOutil}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{casavoir}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteAsavoir}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=red,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{red}{\faHeart}{À savoir}{\theMaquetteAsavoir}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cbloctd}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteTD}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=VertMerClair,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{VertMerClair}{\faHourglassStart}{TD}{\theMaquetteTD}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cblocdm}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteAvousdejouer}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=VertMerClair,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{VertMerClair}{\faHourglassStart}{À vous de jouer}{\theMaquetteAvousdejouer}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{crappel}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteRappel}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=SaumonClair,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{SaumonClair}{\faHandPointUp[regular]}{Rappel}{\theMaquetteRappel}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cresol}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteResolution}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=VertMerClair,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{VertMerClair}{\faPuzzlePiece}{Résolution}{\theMaquetteResolution}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{cattention}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteAttention}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=red,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{red}{\faExclamationTriangle}{Attention}{\theMaquetteAttention}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\NewDocumentEnvironment{ccode}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteCode}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Cramoisi,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Cramoisi}{\faCode}{Code}{\theMaquetteCode}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%python
\NewDocumentEnvironment{cpython}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquettePython}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=teal,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{teal}{\faPython}{Python}{\theMaquettePython}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%demo
\NewDocumentEnvironment{cdemo}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteDemo}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=violet,#2,%
		overlay unbroken and first={%
			\begin{tcbclipinterior}\node[font=\large\bfseries,text=violet] at ($(interior.south east)+(-10pt,10pt)$){\CheckedBox};\end{tcbclipinterior}
			\tikzset{overlay=false}
			\TitreBoiteCP{violet}{\faEdit[regular]}{Démonstration}{\theMaquetteDemo}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%loglogo
\NewDocumentEnvironment{clog}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteLog}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Bleuet,#2,%
		overlay unbroken and first={%
			\IfStrEq{\BoxLogo}{}{}{\LogoCoinDroitCP}%
			\tikzset{overlay=false}
			\TitreBoiteCP{Bleuet}{\faDev}{Logiciel}{\theMaquetteLog}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%algo
\NewDocumentEnvironment{calgo}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteAlgo}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=RougeOrange,#2,%
		overlay={%
			\begin{tcbclipinterior}\node[opacity=0.15,rotate=-15] at ($(interior.south east)+(-8pt,12pt)$){\includegraphics[height=24pt]{algorithmvec}};\end{tcbclipinterior}
			\tikzset{overlay=false}
			\TitreBoiteCP{RougeOrange}{\faFileCode}{Algorithme}{\theMaquetteAlgo}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%aide
\NewDocumentEnvironment{caide}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteAide}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=TitreBleu,#2,%
		overlay unbroken and first={%
			\begin{tcbclipinterior}\node[opacity=0.33,rotate=45,scale=0.33,text=TitreBleu!25!black,font=\footnotesize\bfseries\sffamily] at ($(interior.south east)+(-6pt,6pt)$){\textcopyright{} Dairon11};\end{tcbclipinterior}
			\tikzset{overlay=false}
			\TitreBoiteCP{TitreBleu}{\faBacon}{Niveaux de difficulté}{\theMaquetteAide}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%scratch
\NewDocumentEnvironment{cscratch}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteScratch}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=OrangeScratch,#2,%
		overlay unbroken and first={%
			\begin{tcbclipinterior}\node[opacity=0.33,rotate=45] at ($(interior.south east)+(-12pt,12pt)$){\includegraphics[height=12pt]{scratchban}};\end{tcbclipinterior}
			\tikzset{overlay=false}
			\TitreBoiteCP{OrangeScratch}{\includegraphics[height=1em]{scratch}}{Scratch}{\theMaquetteScratch}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

%réponse
\NewDocumentEnvironment{creponse}{ O{} D<>{} }%
{%
	\useKVdefault[Boites]%
	\setKV[Boites]{#1}%
	\ifboolKV[Boites]{Compteur}{\stepcounter{MaquetteReponse}}{}%
	\tcolorbox[%
		cpbaseboite,colframe=Chardon,#2,%
		overlay unbroken and first={%
			\tikzset{overlay=false}
			\TitreBoiteCP{Chardon}{\faIcon{pen-alt}}{Réponse}{\theMaquetteReponse}
			\IfStrEq{\BoxSubTitle}{}{}{\SousTitreBoiteCP}%
		}%
	]%
}{\endtcolorbox}%

\fi

%==========================calculatrice CASIO
% \newcommand{\itemnqd}[1]{%
	% \setlength{\fboxsep}{1pt}%
	% {\footnotesize \colorbox{black}{\fontcalcqd\bfseries\textcolor{white}{#1}}}}
% \newcommand{\itembqd}[1]{%
	% \setlength{\fboxsep}{1pt}%
	% {\footnotesize \fbox{\fontcalcqd\bfseries #1}}}
% \newcommand{\itemntc}[1]{%
	% \setlength{\fboxsep}{1pt}%
	% {\footnotesize \colorbox{black}{\fontcalctc\bfseries\textcolor{white}{#1}}}}
% \newcommand{\itembtc}[1]{%
	% \setlength{\fboxsep}{1pt}%
	% {\footnotesize \fbox{\fontcalctc\bfseries #1}}}

% \newlength\largmenutc
% \settowidth{\largmenutc}{\policecasiotc XXXX}
% \addtolength{\largmenutc}{2pt}
% \newlength\largitemtc
% \settowidth{\largitemtc}{\ttfamily\textbf{XXXXXXXXXXXXXXXXXXX}}

% \tcbset{casiotc/.style={%
		% enhanced,%
		% fontupper=\policecasiotc,%
		% nobeforeafter,%
		% box align=base,%
		% boxsep=1pt,%
		% boxrule=0.75pt,%
		% boxsep=1pt,%
		% left=0pt,%
		% right=0pt,%
		% top=0pt,%
		% bottom=0pt,%
		% tcbox width=forced center,%
		% no borderline
	% }
% }
% \tcbset{casiotcmenunoir/.style={%
		% width=\largmenutc,%
		% colframe=black,%
		% colback=black,%
		% colupper=white,%
		% sharp corners,%
		% rounded corners=southeast,%
		% arc=3pt,%
		% arc is angular,%
		% add to width=1pt
	% }
% }
% \tcbset{casiotcmenublanc/.style={%
		% enhanced,%
		% frame hidden,%
		% width=\largmenutc,%
		% colframe=black,%
		% colback=white,%
		% colupper=black,%
		% sharp corners,%
		% add to width=1pt,
		% borderline north={0.75pt}{0pt}{black},
		% borderline west={0.75pt}{0pt}{black}
	% }
% }
% \tcbset{casiotcitemnoir/.style={%
		% width=\largmenutc,%
		% colframe=black,%
		% colback=black,%
		% colupper=white,%
		% sharp corners,%
		% add to width=1pt
	% }
% }
% \tcbset{casiotcitemsel/.style={%
		% width=\largitemtc,%
		% tcbox width=auto,%
		% sharp corners,%
		% colframe=black,%
		% colback=black,%
		% colupper=white,%
	% }
% }

% \newlength\largmenuqd
% \settowidth{\largmenuqd}{\policecasioqd XXXXX}
% \tcbset{casioqd/.style={%
		% fontupper=\policecasioqd,%
		% nobeforeafter,%
		% box align=base,%
		% boxsep=1pt,%
		% boxrule=0.75pt,%
		% boxsep=1pt,%
		% left=0pt,%
		% right=0pt,%
		% top=0pt,%
		% bottom=0pt,%
		% tcbox width=forced center
	% }
% }
% \tcbset{casioqdmenunoir/.style={%
		% enhanced,%
		% width=\largmenuqd,%
		% colframe=black,%
		% colback=black,%
		% colupper=white,%
		% arc=1pt,%
		% add to width=2pt
	% }
% }
% \tcbset{casioqdmenublanc/.style={%
		% width=\largmenuqd,%
		% colframe=black,%
		% colback=white,%
		% colupper=black,%
		% rounded corners,%
		% arc=1pt,%
		% add to width=2pt
	% }
% }
% \tcbset{casioqditemnoir/.style={%
		% width=\largmenuqd,%
		% colframe=black,%
		% colback=black,%
		% colupper=white,%
		% sharp corners,%
		% add to width=2pt
	% }
% }

% \newcommand\mencastcn[1]{\tcbox[casiotc,casiotcmenunoir]{#1}}
% \newcommand\mencastcb[1]{\tcbox[casiotc,casiotcmenublanc]{#1}}
% \newcommand\itcastcn[1]{\tcbox[casiotc,casiotcitemnoir]{#1}}
% \newcommand\itcastcsel[1]{\tcbox[tcbox width=minimum center,casiotc,casiotcitemsel]{#1}}

% \newcommand\mencasqdn[2][white]{\tcbox[casioqd,casioqdmenunoir,overlay={\path[fill=#1]($(frame.south east) + (0.1pt,-0.1pt)$) -- ++ (0pt,3.2pt)  -- ++ (-3.2pt,-3.2pt) -- cycle;}]{#2}}
% \newcommand\mencasqdb[1]{\tcbox[casioqd,casioqdmenublanc]{#1}}
% \newcommand\itcasqdn[1]{\tcbox[casioqd,casioqditemnoir]{#1}}
% \newcommand\itcasqdsel[1]{\tcbox[casioqd,casiotcitemsel]{#1}}

%===========================calculatrice NWKS
% \tcbset{vignettemenunwks/.style={%
		% size=small,%
		% left=2pt,right=2pt,%
		% fontupper={\vphantom{pf}\scriptsize\fontnwks},%
		% nobeforeafter,%
		% box align=base,%
		% boxsep=0pt,%
		% sharp corners=all}
% }

% \newcommand\menunwks[1]{\tcbox[vignettemenunwks,colframe=gray,colupper=white,colback=gray]{\scalebox{0.9}[1]{#1}}}
% \newcommand\menunwksg[1]{\tcbox[vignettemenunwks,colframe=lightgray!50,colupper=black,colback=lightgray!50]{\scalebox{0.9}[1]{#1}}}
% \newcommand\menunwksb[1]{\tcbox[vignettemenunwks,colframe=lightgray,colupper=gray,colback=white]{\scalebox{0.9}[1]{#1}}}
% \newcommand\nwkstri{\textcolor{orange}{$\blacktriangleright$}}

%==========================calculatrice TEXAS
% \newcommand\menuselecti[1]{\tcbox[size=tight,fontupper=\ttfamily\bfseries\footnotesize,colback=black,colupper=white,nobeforeafter,left=0pt,right=0pt,top=0pt,bottom=0pt,box align=base,]{\scalebox{0.85}[1.15]{#1}}}

% \newcommand\tpp{\scalebox{0.66}[1]{\dots}}

% \newcommand\ongletselecti[1]{\tcbox[size=tight,fontupper=\ttfamily\bfseries\small,colback=black,colframe=black,colupper=white,nobeforeafter,left=0pt,right=0pt,top=0pt,bottom=0pt,box align=base]{\vphantom{[A]/Fiy}#1}}

% \newcommand\itemselecti[2]{\ongletselecti{\NoAutoSpacing\vphantom{[A]/Fiy}#1}\tcbox[size=tight,fontupper=\ttfamily\bfseries\small,colback=white,colupper=black,nobeforeafter,left=1pt,right=0pt,top=0pt,bottom=0pt,box align=base,colframe=black]{\vphantom{[A]/Fiy}#2}}


%==============================commandes tikz
\def\pgfpointnormalised#1{%
	\pgf@process{#1}%
	\pgfmathatantwo{\the\pgf@y}{\the\pgf@x}%
	\let\pgf@tmp=\pgfmathresult%
	\pgfmathcos@{\pgf@tmp}\pgf@x=\pgfmathresult pt\relax%
	\pgfmathsin@{\pgf@tmp}\pgf@y=\pgfmathresult pt\relax%
}

%======================================Divers
\NewDocumentCommand\noticetikz{ s m }{%
	\IfBooleanTF{#1}%
		{%
			$\vcenter{\hbox{\begin{tikzpicture}\draw[color=#2,very thick,densely dashed](0,0)--(0.57,0);\filldraw[fill=#2,draw=#2,thick] (0.57,0) circle (3pt);\end{tikzpicture}}}$
		}%
		{%
			$\vcenter{\hbox{\begin{tikzpicture}\draw[color=#2,very thick,densely dashed](0,0)--(0.57,0);\filldraw[fill=white,draw=#2,thick] (0.57,0) circle (3pt);\end{tikzpicture}}}$
		}%
}

\NewDocumentCommand\noticetikzf{ m }{%
	$\vcenter{\hbox{\begin{tikzpicture}\draw[#1,thick,<->](0,0)--(0.65,0);\end{tikzpicture}}}$
}

\NewDocumentCommand\noticetikzt{ m }{%
	$\vcenter{\hbox{\begin{tikzpicture}\draw[#1,thick](0,0)--(0.65,0);\end{tikzpicture}}}$
}

%==========================piedbtsblanc
\defKV[piedexam]{%
	Session=\def\FooterExamSession{#1},%
	Classe=\def\FooterExamClasse{#1},%
	Epreuve=\def\FooterExamEpreuve{#1},%
	Num=\def\FooterExamNum{#1},%
	Type=\def\FooterExamType{#1}
}

\setKVdefault[piedexam]{%
	Session=\the\year,%
	Classe=SIO2,%
	Epreuve=E2,%
	Num=1,%
	Type=BB0
}

\newcommand\piedbtsblanctblr[1]{%
	\useKVdefault[piedexam]%
	\setKV[piedexam]{#1}%
	\IfSubStr{\FooterExamClasse}{1}%
		{\def\tmpcode{1}}%
		{\def\tmpcode{2}}%
	\IfSubStr{\FooterExamEpreuve}{F}%
		{%
			\def\tmplabel{MATHÉMATIQUES APPROFONDIES}%
			\def\tmpepr{EF}%
			\def\tmpduree{2 heures}%
			\def\tmpcoeff{1}%
		}%
		{%
			\def\tmplabel{MATHÉMATIQUES POUR L'INFORMATIQUE}%
			\def\tmpepr{E}%
			\def\tmpduree{55 minutes}%
			\def\tmpcoeff{2}%
		}%
	\begin{tblr}{rowsep=0pt,width=\linewidth,hlines,vlines,colspec={X[3.67,l,m]X[l,m]X[1,l,m]},cells={font=\sffamily}}
		BTS SERVICES INFORMATIQUES AUX ORGANISATIONS & \SetCell[c=2]{c,m} SESSION : 20\FooterExamSession & \\
		\SetCell[r=2]{m} ÉPREUVE : \tmplabel & \SetCell[c=2]{c,m} SUJET & \\
		& Coefficient : \tmpcoeff & \SetCell[r=2]{c,m} Page \thepage{}/\ztotpages \\
		\textbf{\FooterExamSession{}SI\tmpepr{}\tmpcode{}MAT\FooterExamType\FooterExamNum} & Durée : \tmpduree & \\
	\end{tblr}%
}

\endinput